function CMDX:CreateWindow(options)

	local Players = game:GetService("Players")
	local player = Players.LocalPlayer
	local UIS = game:GetService("UserInputService")

	local theme = {
		MenuColor = options.MenuColor or Color3.fromRGB(25,25,25),
		TextColor = options.TextColor or Color3.fromRGB(220,220,220)
	}

	local Commands = {}
	local minimized = false

	local Window = {}
	Window.Commands = Commands
	Window.Theme = theme

	-- GUI
	local gui = Instance.new("ScreenGui")
	gui.Name = options.Name or "CMDX_UI"
	gui.ResetOnSpawn = false
	gui.Parent = player:WaitForChild("PlayerGui")

	-- Main Frame
	local main = Instance.new("Frame")
	main.Size = UDim2.new(0, 420, 0, 260)
	main.Position = UDim2.new(0.5, -210, 0.5, -130)
	main.BackgroundColor3 = theme.MenuColor
	main.BorderSizePixel = 2
	main.BorderColor3 = Color3.fromRGB(60,60,60)
	main.Parent = gui

	-- Topbar
	local topbar = Instance.new("Frame")
	topbar.Size = UDim2.new(1,0,0,35)
	topbar.BackgroundColor3 = theme.MenuColor:Lerp(Color3.new(0,0,0), 0.2)
	topbar.Parent = main

	-- Title
	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1,-80,1,0)
	title.Position = UDim2.new(0,10,0,0)
	title.BackgroundTransparency = 1
	title.Text = options.Title or "CMDX Window"
	title.Font = Enum.Font.Code
	title.TextSize = 16
	title.TextColor3 = theme.TextColor
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.Parent = topbar

	-- MINIMIZE BUTTON
	local minimize = Instance.new("TextButton")
	minimize.Size = UDim2.new(0,35,1,0)
	minimize.Position = UDim2.new(1,-70,0,0)
	minimize.Text = "-"
	minimize.Font = Enum.Font.Code
	minimize.TextSize = 16
	minimize.TextColor3 = Color3.fromRGB(255,255,255)
	minimize.BackgroundColor3 = Color3.fromRGB(40,40,40)
	minimize.Parent = topbar

	-- CLOSE BUTTON
	local close = Instance.new("TextButton")
	close.Size = UDim2.new(0,35,1,0)
	close.Position = UDim2.new(1,-35,0,0)
	close.Text = "X"
	close.Font = Enum.Font.Code
	close.TextSize = 16
	close.TextColor3 = Color3.fromRGB(255,80,80)
	close.BackgroundColor3 = Color3.fromRGB(40,40,40)
	close.Parent = topbar

	close.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	-- Container
	local container = Instance.new("Frame")
	container.Size = UDim2.new(1,-20,1,-50)
	container.Position = UDim2.new(0,10,0,40)
	container.BackgroundTransparency = 1
	container.Parent = main

	-- Scrolling history
	local scrolling = Instance.new("ScrollingFrame")
	scrolling.Size = UDim2.new(1,0,1,-45)
	scrolling.CanvasSize = UDim2.new(0,0,0,0)
	scrolling.ScrollBarThickness = 4
	scrolling.BackgroundTransparency = 1
	scrolling.Parent = container

	local layout = Instance.new("UIListLayout")
	layout.Parent = scrolling
	layout.Padding = UDim.new(0,6)

	layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		scrolling.CanvasSize = UDim2.new(0,0,0,layout.AbsoluteContentSize.Y + 5)
		scrolling.CanvasPosition = Vector2.new(0, scrolling.CanvasSize.Y.Offset)
	end)

	-- Command Box
	local box = Instance.new("TextBox")
	box.Size = UDim2.new(1,0,0,40)
	box.Position = UDim2.new(0,0,1,-40)
	box.BackgroundColor3 = theme.MenuColor:Lerp(Color3.new(0,0,0), 0.3)
	box.BorderSizePixel = 1
	box.BorderColor3 = Color3.fromRGB(70,70,70)
	box.TextColor3 = theme.TextColor
	box.Font = Enum.Font.Code
	box.TextSize = 16
	box.PlaceholderText = "Digite comando..."
	box.ClearTextOnFocus = false
	box.Parent = container

	-- Histórico visual
	local function AddHistory(text)
		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1,-5,0,25)
		label.BackgroundTransparency = 1
		label.TextWrapped = true
		label.TextXAlignment = Enum.TextXAlignment.Left
		label.Text = text
		label.Font = Enum.Font.Code
		label.TextSize = 14
		label.TextColor3 = theme.TextColor
		label.Parent = scrolling
	end

	box.FocusLost:Connect(function(enter)
		if not enter then return end

		local text = box.Text
		local args = string.split(text, " ")
		local cmd = args[1]

		AddHistory("> "..text)

		if Commands[cmd] then
			Commands[cmd](args)
		else
			AddHistory("Comando não encontrado.")
		end

		box.Text = ""
	end)

	-- Register Command
	function Window:RegisterCommand(name, callback)
		Commands[name] = callback
	end

	-- Minimize logic
	minimize.MouseButton1Click:Connect(function()
		minimized = not minimized

		if minimized then
			container.Visible = false
			main.Size = UDim2.new(0,420,0,35)
		else
			container.Visible = true
			main.Size = UDim2.new(0,420,0,260)
		end
	end)

	-- DRAG SYSTEM
	local dragging, dragStart, startPos

	topbar.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = main.Position
		end
	end)

	UIS.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			main.Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		end
	end)

	UIS.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)

	return Window
end